

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>20. 第一次MRF迭代 &mdash; PRoRS 0.0.1 文档</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="索引"
              href="../genindex.html"/>
        <link rel="search" title="搜索" href="../search.html"/>
    <link rel="top" title="PRoRS 0.0.1 文档" href="../index.html"/>
        <link rel="up" title="像元特征分类" href="index.html"/>
        <link rel="next" title="1. 图像平面分类" href="../2ndPart/index.html"/>
        <link rel="prev" title="&lt;no title&gt;" href="One_7.3_Mul_Kmeans.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> PRoRS
          

          
          </a>

          
            
            
              <div class="version">
                0.0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">第一部分:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">像元特征分类</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="2_SK_KNC_naive_bayesGB_QDA_SDGclassfier.html">1. 以Jupyter Notebook为基本工具</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.2_SGDLossfunction.html">2. SGD 损失函数</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.2_SGDLossfunction.html#训练样本的（归一化）损失值">3. 训练样本的（归一化）损失值</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.2_SGDLossfunction.html#假设测试样本分别为正类或负类的（归一化）损失值">4. 假设测试样本分别为正类或负类的（归一化）损失值</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.3_twoGB.html">5. 二维高斯分布</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.3_twoGB.html#协方差矩阵">6. 协方差矩阵</a></li>
<li class="toctree-l2"><a class="reference internal" href="4.1_MLPClassfier.html">7. 多层神经网络</a></li>
<li class="toctree-l2"><a class="reference internal" href="4.1_MLPClassfier.html#训练数据集">8. 训练数据集</a></li>
<li class="toctree-l2"><a class="reference internal" href="4.1_MLPClassfier.html#测试数据集">9. 测试数据集</a></li>
<li class="toctree-l2"><a class="reference internal" href="4.1_MLPClassfier.html#四种激活函数分类">10. 四种激活函数分类</a></li>
<li class="toctree-l2"><a class="reference internal" href="4.2_MLPClassifier_hidenWeights.html">11. 多层神经网络</a></li>
<li class="toctree-l2"><a class="reference internal" href="4.2_MLPClassifier_hidenWeights.html#训练数据集">12. 训练数据集</a></li>
<li class="toctree-l2"><a class="reference internal" href="4.2_MLPClassifier_hidenWeights.html#测试数据集">13. 测试数据集</a></li>
<li class="toctree-l2"><a class="reference internal" href="4.2_MLPClassifier_hidenWeights.html#存储各隐层权重的array">14. 存储各隐层权重的array</a></li>
<li class="toctree-l2"><a class="reference internal" href="4.2_MLPClassifier_hidenWeights.html#四种激活函数分类">15. 四种激活函数分类</a></li>
<li class="toctree-l2"><a class="reference internal" href="4.2_MLPClassifier_hidenWeights.html#隐层过程">16. 隐层过程</a></li>
<li class="toctree-l2"><a class="reference internal" href="6.2_Ensemblemethods.html">17. 随机森林、ExtraTrees、Adaboost、GradientBoost分类效果</a></li>
<li class="toctree-l2"><a class="reference internal" href="6.2_Ensemblemethods.html#RandomForest并行分类过程">18. RandomForest并行分类过程</a></li>
<li class="toctree-l2"><a class="reference internal" href="6.2_Ensemblemethods.html#AdaBoost串行分类过程">19. AdaBoost串行分类过程</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">20. 第一次MRF迭代</a></li>
<li class="toctree-l2"><a class="reference internal" href="#第二次MRF迭代">21. 第二次MRF迭代</a></li>
<li class="toctree-l2"><a class="reference internal" href="#第三次MRF迭代">22. 第三次MRF迭代</a></li>
<li class="toctree-l2"><a class="reference internal" href="#第四次MRF迭代">23. 第四次MRF迭代</a></li>
<li class="toctree-l2"><a class="reference internal" href="#第五次MRF迭代">24. 第五次MRF迭代</a></li>
<li class="toctree-l2"><a class="reference internal" href="#第六次MRF迭代">25. 第六次MRF迭代</a></li>
<li class="toctree-l2"><a class="reference internal" href="#第七次MRF迭代">26. 第七次MRF迭代</a></li>
<li class="toctree-l2"><a class="reference internal" href="#第八次MRF迭代">27. 第八次MRF迭代</a></li>
<li class="toctree-l2"><a class="reference internal" href="#第九次MRF迭代">28. 第九次MRF迭代</a></li>
<li class="toctree-l2"><a class="reference internal" href="#第十次MRF迭代">29. 第十次MRF迭代</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">第二部分:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../2ndPart/index.html">1. 图像平面分类</a></li>
</ul>
<p class="caption"><span class="caption-text">第三部分:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../3rdPart/index.html">地表覆盖制图</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">PRoRS</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">像元特征分类</a> &raquo;</li>
        
      <li>20. 第一次MRF迭代</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/1stPart/One_7.4_Pan_GMM_MRF.ipynb.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput,
div.nbinput div.prompt,
div.nbinput div.input_area,
div.nbinput div[class*=highlight],
div.nbinput div[class*=highlight] pre,
div.nboutput,
div.nbinput div.prompt,
div.nbinput div.output_area,
div.nboutput div[class*=highlight],
div.nboutput div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput,
div.nboutput {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput,
    div.nboutput {
        flex-direction: column;
    }
}

/* input container */
div.nbinput {
    padding-top: 5px;
}

/* last container */
div.nblast {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput div.prompt pre {
    color: #303F9F;
}

/* output prompt */
div.nboutput div.prompt pre {
    color: #D84315;
}

/* all prompts */
div.nbinput div.prompt,
div.nboutput div.prompt {
    min-width: 8ex;
    padding-top: 0.4em;
    padding-right: 0.4em;
    text-align: right;
    flex: 0;
}
@media (max-width: 540px) {
    div.nbinput div.prompt,
    div.nboutput div.prompt {
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput div.prompt.empty {
        padding: 0;
    }
}

/* disable scrollbars on prompts */
div.nbinput div.prompt pre,
div.nboutput div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput div.input_area,
div.nboutput div.output_area {
    padding: 0.4em;
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput div.input_area,
    div.nboutput div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput div.input_area {
    border: 1px solid #cfcfcf;
    border-radius: 2px;
    background: #f7f7f7;
}

/* override MathJax center alignment in output cells */
div.nboutput div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.pngmath center alignment in output cells */
div.nboutput div.math p {
    text-align: left;
}

/* standard error */
div.nboutput div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-bold { font-weight: bold; }

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

/* nice headers on first paragraph of info/warning boxes */
.admonition .first {
    margin: -12px;
    padding: 6px 12px;
    margin-bottom: 12px;
    color: #fff;
    line-height: 1;
    display: block;
}
.admonition.warning .first {
    background: #f0b37e;
}
.admonition.note .first {
    background: #6ab0de;
}
.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}
</style>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span>import sklearn
from PIL import Image
import matplotlib.pyplot as plt
from sklearn import mixture
import numpy as np
import pylab as pl
import skimage.io as SKimg
import scipy.io as sio

import math
import sys
import ALLNeighborhoodrelationship as ABL
import MatrixNeighborhood  as MNB
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span>#读取tiff影像
Tpan =SKimg.imread(&quot;F:/pythontestdata/MyTiff/tianhui1200pan.tif&quot;)
SKimg.imshow(Tpan)
SKimg.show()
Tpan.shape

Rows=Tpan.shape[0]; Cols=Tpan.shape[1];
NewTpan=np.array(Tpan.reshape(Rows*Cols,1));

TpanOne=Tpan.flatten();
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/1stPart_One_7.4_Pan_GMM_MRF_1_0.png" src="../_images/1stPart_One_7.4_Pan_GMM_MRF_1_0.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span>#matlab文件名
matfn=&#39;gt_tianhui1200.mat&#39;;
data=sio.loadmat(matfn);
mk = data[&#39;gt&#39;]
print(mk)
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[[6 6 4 ..., 6 6 6]
 [6 6 6 ..., 6 6 6]
 [6 6 6 ..., 6 6 6]
 ...,
 [3 3 3 ..., 2 2 2]
 [6 3 3 ..., 2 2 2]
 [6 3 3 ..., 2 2 2]]
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span>GMMmy = mixture.GaussianMixture(n_components=7,covariance_type=&#39;full&#39;,max_iter=500).fit(NewTpan);
Labels=GMMmy.predict(NewTpan);  Clus_Centers=GMMmy.means_;  weights_=GMMmy.weights_;
covariances_ =GMMmy.covariances_;        precisions_ =GMMmy.precisions_;
Score=GMMmy.score(NewTpan);

#一维高斯概率密度函数
def OneDimentionGB(X,u,s):
    ALLF=[];
    for IX in range(0,len(X)):
        f=math.exp(-math.pow((X[IX]-u),2)/2*s)/math.sqrt(2*math.pi*s); ALLF.append(f);
    return ALLF;
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span>finaLabel=mk-2;
for HL in range(0,len(Labels)):
    h=math.floor(HL/1200); l=HL%1200;
    finaLabel[h][l]=Labels[HL];
# 成图展示
mylabel=finaLabel;
print(mylabel)
plt.figure(figsize=(6,6))
im2 = Image.fromarray(mylabel);
plt.imshow(im2,cmap=plt.cm.get_cmap(&#39;cubehelix_r&#39;,8));
cbar=plt.colorbar()
cbar.set_ticks(np.linspace(0,7,8))
#cbar.set_ticklabels()
plt.clim(-0.5,8)
plt.title(&#39;Eight-Xianyan-GMM&#39;);
plt.show();
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[[0 0 3 ..., 0 0 0]
 [0 0 3 ..., 0 0 0]
 [0 0 3 ..., 0 0 0]
 ...,
 [1 1 1 ..., 0 0 0]
 [2 1 1 ..., 0 0 0]
 [2 2 1 ..., 0 0 0]]
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/1stPart_One_7.4_Pan_GMM_MRF_4_1.png" src="../_images/1stPart_One_7.4_Pan_GMM_MRF_4_1.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span>X=np.arange(0,255);    ALLGBfrency=[];
cor=[&#39;r&#39;,&#39;g&#39;,&#39;b&#39;,&#39;y&#39;,&#39;k&#39;,&#39;c&#39;,&#39;m&#39;];
plt.figure(figsize=(6,5));
for i in range(0,len(Clus_Centers)):
    Uvalue=np.unique(TpanOne,return_index=True,return_inverse=True,return_counts = True)[0];
    Uinverse=np.unique(TpanOne,return_index=True,return_inverse=True,return_counts = True)[2];
    f=OneDimentionGB(Uvalue,Clus_Centers[i],covariances_[i]);  f=np.array(f);
    frency=f[Uinverse];     ALLGBfrency.append(frency);
    plt.plot(Uvalue,f,label=Clus_Centers[i],color=cor[i],linewidth=2);
plt.xlabel(&quot;Pixcel-Value&quot;);  plt.ylabel(&quot;Probability&quot;);   plt.xlim(0,150);  plt.ylim(0,0.05);
plt.title(&quot;P of each GB&quot;);
plt.legend(); plt.show();
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/1stPart_One_7.4_Pan_GMM_MRF_5_0.png" src="../_images/1stPart_One_7.4_Pan_GMM_MRF_5_0.png" />
</div>
</div>
<div class="section" id="第一次MRF迭代">
<h1>20. 第一次MRF迭代<a class="headerlink" href="#第一次MRF迭代" title="永久链接至标题">¶</a></h1>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span>PPB=MNB.PPBeight(finaLabel);
L0F=np.sum((PPB==0),axis=0)/8;
L1F=np.sum((PPB==1),axis=0)/8;
L2F=np.sum((PPB==2),axis=0)/8;
L3F=np.sum((PPB==3),axis=0)/8;
L4F=np.sum((PPB==4),axis=0)/8;
L5F=np.sum((PPB==5),axis=0)/8;
L6F=np.sum((PPB==6),axis=0)/8;

ALLPP=[L0F,L1F,L2F,L3F,L4F,L5F,L6F];

ALLpost=[];
for j in range(0,len(ALLPP)):
    TEMPpost=(ALLGBfrency[j]+0)*ALLPP[j];
    ALLpost.append(TEMPpost);

LastLabel=np.zeros(mk.shape[0]*mk.shape[1]);
for n in range(0,mk.shape[0]*mk.shape[1]):
    MAXP=0;   maxindex=0;      tempF=[];
    for a in range(0,len(ALLpost)):
        tempF.append(ALLpost[a][n]);
    for k in range(0,len(tempF)):
        if(tempF[k]&gt;MAXP):
            MAXP=tempF[k];
            maxindex=k;
    LastLabel[n]=maxindex;

FirstMRF=mk-2;
for HL in range(0,len(LastLabel)):
    h=math.floor(HL/1200); l=HL%1200;
    FirstMRF[h][l]=LastLabel[HL];

# 成图展示
mylabel=FirstMRF;
print(mylabel)
plt.figure(figsize=(6,6))
im2 = Image.fromarray(mylabel);
plt.imshow(im2,cmap=plt.cm.get_cmap(&#39;cubehelix_r&#39;,8));
cbar=plt.colorbar()
cbar.set_ticks(np.linspace(0,7,8))
#cbar.set_ticklabels()
plt.clim(-0.5,8)
plt.title(&#39;Eight-Xianyan-FirstMRF&#39;);
plt.show();
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[[0 0 3 ..., 0 0 0]
 [0 0 3 ..., 0 0 0]
 [0 0 3 ..., 0 0 0]
 ...,
 [1 0 0 ..., 0 0 0]
 [0 1 0 ..., 0 0 0]
 [2 0 1 ..., 0 0 0]]
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/1stPart_One_7.4_Pan_GMM_MRF_7_1.png" src="../_images/1stPart_One_7.4_Pan_GMM_MRF_7_1.png" />
</div>
</div>
</div>
<div class="section" id="第二次MRF迭代">
<h1>21. 第二次MRF迭代<a class="headerlink" href="#第二次MRF迭代" title="永久链接至标题">¶</a></h1>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span>PPB=MNB.PPBeight(FirstMRF);
L0F=np.sum((PPB==0),axis=0)/8;
L1F=np.sum((PPB==1),axis=0)/8;
L2F=np.sum((PPB==2),axis=0)/8;
L3F=np.sum((PPB==3),axis=0)/8;
L4F=np.sum((PPB==4),axis=0)/8;
L5F=np.sum((PPB==5),axis=0)/8;
L6F=np.sum((PPB==6),axis=0)/8;

ALLPP=[L0F,L1F,L2F,L3F,L4F,L5F,L6F];

ALLpost=[];
for j in range(0,len(ALLPP)):
    TEMPpost=(ALLGBfrency[j]+0)*ALLPP[j];
    ALLpost.append(TEMPpost);

LastLabel=np.zeros(mk.shape[0]*mk.shape[1]);
for n in range(0,mk.shape[0]*mk.shape[1]):
    MAXP=0;   maxindex=0;      tempF=[];
    for a in range(0,len(ALLpost)):
        tempF.append(ALLpost[a][n]);
    for k in range(0,len(tempF)):
        if(tempF[k]&gt;MAXP):
            MAXP=tempF[k];
            maxindex=k;
    LastLabel[n]=maxindex;

SecondMRF=mk-2;
for HL in range(0,len(LastLabel)):
    h=math.floor(HL/1200); l=HL%1200;
    SecondMRF[h][l]=LastLabel[HL];

# 成图展示
mylabel=SecondMRF;
print(mylabel)
plt.figure(figsize=(6,6))
im2 = Image.fromarray(mylabel);
plt.imshow(im2,cmap=plt.cm.get_cmap(&#39;cubehelix_r&#39;,8));
cbar=plt.colorbar()
cbar.set_ticks(np.linspace(0,7,8))
#cbar.set_ticklabels()
plt.clim(-0.5,8)
plt.title(&#39;Eight-Xianyan-SecondMRF&#39;);
plt.show();
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[[0 0 3 ..., 0 0 0]
 [0 0 3 ..., 0 0 0]
 [0 0 3 ..., 0 0 0]
 ...,
 [1 0 0 ..., 0 0 0]
 [0 1 0 ..., 0 0 0]
 [2 0 1 ..., 0 0 0]]
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/1stPart_One_7.4_Pan_GMM_MRF_9_1.png" src="../_images/1stPart_One_7.4_Pan_GMM_MRF_9_1.png" />
</div>
</div>
</div>
<div class="section" id="第三次MRF迭代">
<h1>22. 第三次MRF迭代<a class="headerlink" href="#第三次MRF迭代" title="永久链接至标题">¶</a></h1>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span>PPB=MNB.PPBeight(SecondMRF);
L0F=np.sum((PPB==0),axis=0)/8;
L1F=np.sum((PPB==1),axis=0)/8;
L2F=np.sum((PPB==2),axis=0)/8;
L3F=np.sum((PPB==3),axis=0)/8;
L4F=np.sum((PPB==4),axis=0)/8;
L5F=np.sum((PPB==5),axis=0)/8;
L6F=np.sum((PPB==6),axis=0)/8;

ALLPP=[L0F,L1F,L2F,L3F,L4F,L5F,L6F];

ALLpost=[];
for j in range(0,len(ALLPP)):
    TEMPpost=(ALLGBfrency[j]+0)*ALLPP[j];
    ALLpost.append(TEMPpost);

LastLabel=np.zeros(mk.shape[0]*mk.shape[1]);
for n in range(0,mk.shape[0]*mk.shape[1]):
    MAXP=0;   maxindex=0;      tempF=[];
    for a in range(0,len(ALLpost)):
        tempF.append(ALLpost[a][n]);
    for k in range(0,len(tempF)):
        if(tempF[k]&gt;MAXP):
            MAXP=tempF[k];
            maxindex=k;
    LastLabel[n]=maxindex;

ThridMRF=mk-2;
for HL in range(0,len(LastLabel)):
    h=math.floor(HL/1200); l=HL%1200;
    ThridMRF[h][l]=LastLabel[HL];

# 成图展示
mylabel=ThridMRF;
print(mylabel)
plt.figure(figsize=(6,6))
im2 = Image.fromarray(mylabel);
plt.imshow(im2,cmap=plt.cm.get_cmap(&#39;cubehelix_r&#39;,8));
cbar=plt.colorbar()
cbar.set_ticks(np.linspace(0,7,8))
#cbar.set_ticklabels()
plt.clim(-0.5,8)
plt.title(&#39;Eight-Xianyan-ThridMRF&#39;);
plt.show();
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[[0 0 3 ..., 0 0 0]
 [0 0 3 ..., 0 0 0]
 [0 0 3 ..., 0 0 0]
 ...,
 [1 0 0 ..., 0 0 0]
 [0 1 0 ..., 0 0 0]
 [2 0 1 ..., 0 0 0]]
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/1stPart_One_7.4_Pan_GMM_MRF_11_1.png" src="../_images/1stPart_One_7.4_Pan_GMM_MRF_11_1.png" />
</div>
</div>
</div>
<div class="section" id="第四次MRF迭代">
<h1>23. 第四次MRF迭代<a class="headerlink" href="#第四次MRF迭代" title="永久链接至标题">¶</a></h1>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span>PPB=MNB.PPBeight(ThridMRF);
L0F=np.sum((PPB==0),axis=0)/8;
L1F=np.sum((PPB==1),axis=0)/8;
L2F=np.sum((PPB==2),axis=0)/8;
L3F=np.sum((PPB==3),axis=0)/8;
L4F=np.sum((PPB==4),axis=0)/8;
L5F=np.sum((PPB==5),axis=0)/8;
L6F=np.sum((PPB==6),axis=0)/8;

ALLPP=[L0F,L1F,L2F,L3F,L4F,L5F,L6F];

ALLpost=[];
for j in range(0,len(ALLPP)):
    TEMPpost=(ALLGBfrency[j]+0)*ALLPP[j];
    ALLpost.append(TEMPpost);

LastLabel=np.zeros(mk.shape[0]*mk.shape[1]);
for n in range(0,mk.shape[0]*mk.shape[1]):
    MAXP=0;   maxindex=0;      tempF=[];
    for a in range(0,len(ALLpost)):
        tempF.append(ALLpost[a][n]);
    for k in range(0,len(tempF)):
        if(tempF[k]&gt;MAXP):
            MAXP=tempF[k];
            maxindex=k;
    LastLabel[n]=maxindex;

FourthMRF=mk-2;
for HL in range(0,len(LastLabel)):
    h=math.floor(HL/1200); l=HL%1200;
    FourthMRF[h][l]=LastLabel[HL];

# 成图展示
mylabel=FourthMRF;
print(mylabel)
plt.figure(figsize=(6,6))
im2 = Image.fromarray(mylabel);
plt.imshow(im2,cmap=plt.cm.get_cmap(&#39;cubehelix_r&#39;,8));
cbar=plt.colorbar()
cbar.set_ticks(np.linspace(0,7,8))
#cbar.set_ticklabels()
plt.clim(-0.5,8)
plt.title(&#39;Eight-Xianyan-FourthMRF&#39;);
plt.show();
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[[0 0 3 ..., 0 0 0]
 [0 0 3 ..., 0 0 0]
 [0 0 3 ..., 0 0 0]
 ...,
 [1 0 0 ..., 0 0 0]
 [0 1 0 ..., 0 0 0]
 [2 0 1 ..., 0 0 0]]
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/1stPart_One_7.4_Pan_GMM_MRF_13_1.png" src="../_images/1stPart_One_7.4_Pan_GMM_MRF_13_1.png" />
</div>
</div>
</div>
<div class="section" id="第五次MRF迭代">
<h1>24. 第五次MRF迭代<a class="headerlink" href="#第五次MRF迭代" title="永久链接至标题">¶</a></h1>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span>PPB=MNB.PPBeight(FourthMRF);
L0F=np.sum((PPB==0),axis=0)/8;
L1F=np.sum((PPB==1),axis=0)/8;
L2F=np.sum((PPB==2),axis=0)/8;
L3F=np.sum((PPB==3),axis=0)/8;
L4F=np.sum((PPB==4),axis=0)/8;
L5F=np.sum((PPB==5),axis=0)/8;
L6F=np.sum((PPB==6),axis=0)/8;

ALLPP=[L0F,L1F,L2F,L3F,L4F,L5F,L6F];

ALLpost=[];
for j in range(0,len(ALLPP)):
    TEMPpost=(ALLGBfrency[j]+0)*ALLPP[j];
    ALLpost.append(TEMPpost);

LastLabel=np.zeros(mk.shape[0]*mk.shape[1]);
for n in range(0,mk.shape[0]*mk.shape[1]):
    MAXP=0;   maxindex=0;      tempF=[];
    for a in range(0,len(ALLpost)):
        tempF.append(ALLpost[a][n]);
    for k in range(0,len(tempF)):
        if(tempF[k]&gt;MAXP):
            MAXP=tempF[k];
            maxindex=k;
    LastLabel[n]=maxindex;

FivthMRF=mk-2;
for HL in range(0,len(LastLabel)):
    h=math.floor(HL/1200); l=HL%1200;
    FivthMRF[h][l]=LastLabel[HL];

# 成图展示
mylabel=FivthMRF;
print(mylabel)
plt.figure(figsize=(6,6))
im2 = Image.fromarray(mylabel);
plt.imshow(im2,cmap=plt.cm.get_cmap(&#39;cubehelix_r&#39;,8));
cbar=plt.colorbar()
cbar.set_ticks(np.linspace(0,7,8))
#cbar.set_ticklabels()
plt.clim(-0.5,8)
plt.title(&#39;Eight-Xianyan-FivthMRF&#39;);
plt.show();
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[[0 0 3 ..., 0 0 0]
 [0 0 3 ..., 0 0 0]
 [0 0 3 ..., 0 0 0]
 ...,
 [1 0 0 ..., 0 0 0]
 [0 1 0 ..., 0 0 0]
 [2 0 1 ..., 0 0 0]]
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/1stPart_One_7.4_Pan_GMM_MRF_15_1.png" src="../_images/1stPart_One_7.4_Pan_GMM_MRF_15_1.png" />
</div>
</div>
</div>
<div class="section" id="第六次MRF迭代">
<h1>25. 第六次MRF迭代<a class="headerlink" href="#第六次MRF迭代" title="永久链接至标题">¶</a></h1>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span>PPB=MNB.PPBeight(FivthMRF);
L0F=np.sum((PPB==0),axis=0)/8;
L1F=np.sum((PPB==1),axis=0)/8;
L2F=np.sum((PPB==2),axis=0)/8;
L3F=np.sum((PPB==3),axis=0)/8;
L4F=np.sum((PPB==4),axis=0)/8;
L5F=np.sum((PPB==5),axis=0)/8;
L6F=np.sum((PPB==6),axis=0)/8;

ALLPP=[L0F,L1F,L2F,L3F,L4F,L5F,L6F];

ALLpost=[];
for j in range(0,len(ALLPP)):
    TEMPpost=(ALLGBfrency[j]+0)*ALLPP[j];
    ALLpost.append(TEMPpost);

LastLabel=np.zeros(mk.shape[0]*mk.shape[1]);
for n in range(0,mk.shape[0]*mk.shape[1]):
    MAXP=0;   maxindex=0;      tempF=[];
    for a in range(0,len(ALLpost)):
        tempF.append(ALLpost[a][n]);
    for k in range(0,len(tempF)):
        if(tempF[k]&gt;MAXP):
            MAXP=tempF[k];
            maxindex=k;
    LastLabel[n]=maxindex;

SixthMRF=mk-2;
for HL in range(0,len(LastLabel)):
    h=math.floor(HL/1200); l=HL%1200;
    SixthMRF[h][l]=LastLabel[HL];

# 成图展示
mylabel=SixthMRF;
print(mylabel)
plt.figure(figsize=(6,6))
im2 = Image.fromarray(mylabel);
plt.imshow(im2,cmap=plt.cm.get_cmap(&#39;cubehelix_r&#39;,8));
cbar=plt.colorbar()
cbar.set_ticks(np.linspace(0,7,8))
#cbar.set_ticklabels()
plt.clim(-0.5,8)
plt.title(&#39;Eight-Xianyan-SixthMRF&#39;);
plt.show();
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[[0 0 3 ..., 0 0 0]
 [0 0 3 ..., 0 0 0]
 [0 0 3 ..., 0 0 0]
 ...,
 [1 0 0 ..., 0 0 0]
 [0 1 0 ..., 0 0 0]
 [2 0 1 ..., 0 0 0]]
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/1stPart_One_7.4_Pan_GMM_MRF_17_1.png" src="../_images/1stPart_One_7.4_Pan_GMM_MRF_17_1.png" />
</div>
</div>
</div>
<div class="section" id="第七次MRF迭代">
<h1>26. 第七次MRF迭代<a class="headerlink" href="#第七次MRF迭代" title="永久链接至标题">¶</a></h1>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span>PPB=MNB.PPBeight(SixthMRF);
L0F=np.sum((PPB==0),axis=0)/8;
L1F=np.sum((PPB==1),axis=0)/8;
L2F=np.sum((PPB==2),axis=0)/8;
L3F=np.sum((PPB==3),axis=0)/8;
L4F=np.sum((PPB==4),axis=0)/8;
L5F=np.sum((PPB==5),axis=0)/8;
L6F=np.sum((PPB==6),axis=0)/8;

ALLPP=[L0F,L1F,L2F,L3F,L4F,L5F,L6F];

ALLpost=[];
for j in range(0,len(ALLPP)):
    TEMPpost=(ALLGBfrency[j]+0)*ALLPP[j];
    ALLpost.append(TEMPpost);

LastLabel=np.zeros(mk.shape[0]*mk.shape[1]);
for n in range(0,mk.shape[0]*mk.shape[1]):
    MAXP=0;   maxindex=0;      tempF=[];
    for a in range(0,len(ALLpost)):
        tempF.append(ALLpost[a][n]);
    for k in range(0,len(tempF)):
        if(tempF[k]&gt;MAXP):
            MAXP=tempF[k];
            maxindex=k;
    LastLabel[n]=maxindex;

SeventhMRF=mk-2;
for HL in range(0,len(LastLabel)):
    h=math.floor(HL/1200); l=HL%1200;
    SeventhMRF[h][l]=LastLabel[HL];

# 成图展示
mylabel=SeventhMRF;
print(mylabel)
plt.figure(figsize=(6,6))
im2 = Image.fromarray(mylabel);
plt.imshow(im2,cmap=plt.cm.get_cmap(&#39;cubehelix_r&#39;,8));
cbar=plt.colorbar()
cbar.set_ticks(np.linspace(0,7,8))
#cbar.set_ticklabels()
plt.clim(-0.5,8)
plt.title(&#39;Eight-Xianyan-SeventhMRF&#39;);
plt.show();
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[[0 0 3 ..., 0 0 0]
 [0 0 3 ..., 0 0 0]
 [0 0 3 ..., 0 0 0]
 ...,
 [1 0 0 ..., 0 0 0]
 [0 1 0 ..., 0 0 0]
 [2 0 1 ..., 0 0 0]]
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/1stPart_One_7.4_Pan_GMM_MRF_19_1.png" src="../_images/1stPart_One_7.4_Pan_GMM_MRF_19_1.png" />
</div>
</div>
</div>
<div class="section" id="第八次MRF迭代">
<h1>27. 第八次MRF迭代<a class="headerlink" href="#第八次MRF迭代" title="永久链接至标题">¶</a></h1>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span>PPB=MNB.PPBeight(SeventhMRF);
L0F=np.sum((PPB==0),axis=0)/8;
L1F=np.sum((PPB==1),axis=0)/8;
L2F=np.sum((PPB==2),axis=0)/8;
L3F=np.sum((PPB==3),axis=0)/8;
L4F=np.sum((PPB==4),axis=0)/8;
L5F=np.sum((PPB==5),axis=0)/8;
L6F=np.sum((PPB==6),axis=0)/8;

ALLPP=[L0F,L1F,L2F,L3F,L4F,L5F,L6F];

ALLpost=[];
for j in range(0,len(ALLPP)):
    TEMPpost=(ALLGBfrency[j]+0)*ALLPP[j];
    ALLpost.append(TEMPpost);

LastLabel=np.zeros(mk.shape[0]*mk.shape[1]);
for n in range(0,mk.shape[0]*mk.shape[1]):
    MAXP=0;   maxindex=0;      tempF=[];
    for a in range(0,len(ALLpost)):
        tempF.append(ALLpost[a][n]);
    for k in range(0,len(tempF)):
        if(tempF[k]&gt;MAXP):
            MAXP=tempF[k];
            maxindex=k;
    LastLabel[n]=maxindex;

EighthMRF=mk-2;
for HL in range(0,len(LastLabel)):
    h=math.floor(HL/1200); l=HL%1200;
    EighthMRF[h][l]=LastLabel[HL];

# 成图展示
mylabel=EighthMRF;
print(mylabel)
plt.figure(figsize=(6,6))
im2 = Image.fromarray(mylabel);
plt.imshow(im2,cmap=plt.cm.get_cmap(&#39;cubehelix_r&#39;,8));
cbar=plt.colorbar()
cbar.set_ticks(np.linspace(0,7,8))
#cbar.set_ticklabels()
plt.clim(-0.5,8)
plt.title(&#39;Eight-Xianyan-EighthMRF&#39;);
plt.show();
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[[0 0 3 ..., 0 0 0]
 [0 0 3 ..., 0 0 0]
 [0 0 3 ..., 0 0 0]
 ...,
 [1 0 0 ..., 0 0 0]
 [0 1 0 ..., 0 0 0]
 [2 0 1 ..., 0 0 0]]
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/1stPart_One_7.4_Pan_GMM_MRF_21_1.png" src="../_images/1stPart_One_7.4_Pan_GMM_MRF_21_1.png" />
</div>
</div>
</div>
<div class="section" id="第九次MRF迭代">
<h1>28. 第九次MRF迭代<a class="headerlink" href="#第九次MRF迭代" title="永久链接至标题">¶</a></h1>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span>PPB=MNB.PPBeight(EighthMRF);
L0F=np.sum((PPB==0),axis=0)/8;
L1F=np.sum((PPB==1),axis=0)/8;
L2F=np.sum((PPB==2),axis=0)/8;
L3F=np.sum((PPB==3),axis=0)/8;
L4F=np.sum((PPB==4),axis=0)/8;
L5F=np.sum((PPB==5),axis=0)/8;
L6F=np.sum((PPB==6),axis=0)/8;

ALLPP=[L0F,L1F,L2F,L3F,L4F,L5F,L6F];

ALLpost=[];
for j in range(0,len(ALLPP)):
    TEMPpost=(ALLGBfrency[j]+0)*ALLPP[j];
    ALLpost.append(TEMPpost);

LastLabel=np.zeros(mk.shape[0]*mk.shape[1]);
for n in range(0,mk.shape[0]*mk.shape[1]):
    MAXP=0;   maxindex=0;      tempF=[];
    for a in range(0,len(ALLpost)):
        tempF.append(ALLpost[a][n]);
    for k in range(0,len(tempF)):
        if(tempF[k]&gt;MAXP):
            MAXP=tempF[k];
            maxindex=k;
    LastLabel[n]=maxindex;

NinethMRF=mk-2;
for HL in range(0,len(LastLabel)):
    h=math.floor(HL/1200); l=HL%1200;
    NinethMRF[h][l]=LastLabel[HL];

# 成图展示
mylabel=NinethMRF;
print(mylabel)
plt.figure(figsize=(6,6))
im2 = Image.fromarray(mylabel);
plt.imshow(im2,cmap=plt.cm.get_cmap(&#39;cubehelix_r&#39;,8));
cbar=plt.colorbar()
cbar.set_ticks(np.linspace(0,7,8))
#cbar.set_ticklabels()
plt.clim(-0.5,8)
plt.title(&#39;Eight-Xianyan-NinethMRF&#39;);
plt.show();
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[[0 0 3 ..., 0 0 0]
 [0 0 3 ..., 0 0 0]
 [0 0 3 ..., 0 0 0]
 ...,
 [1 0 0 ..., 0 0 0]
 [0 1 0 ..., 0 0 0]
 [2 0 1 ..., 0 0 0]]
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/1stPart_One_7.4_Pan_GMM_MRF_23_1.png" src="../_images/1stPart_One_7.4_Pan_GMM_MRF_23_1.png" />
</div>
</div>
</div>
<div class="section" id="第十次MRF迭代">
<h1>29. 第十次MRF迭代<a class="headerlink" href="#第十次MRF迭代" title="永久链接至标题">¶</a></h1>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span>PPB=MNB.PPBeight(NinethMRF);
L0F=np.sum((PPB==0),axis=0)/8;
L1F=np.sum((PPB==1),axis=0)/8;
L2F=np.sum((PPB==2),axis=0)/8;
L3F=np.sum((PPB==3),axis=0)/8;
L4F=np.sum((PPB==4),axis=0)/8;
L5F=np.sum((PPB==5),axis=0)/8;
L6F=np.sum((PPB==6),axis=0)/8;

ALLPP=[L0F,L1F,L2F,L3F,L4F,L5F,L6F];

ALLpost=[];
for j in range(0,len(ALLPP)):
    TEMPpost=(ALLGBfrency[j]+0)*ALLPP[j];
    ALLpost.append(TEMPpost);

LastLabel=np.zeros(mk.shape[0]*mk.shape[1]);
for n in range(0,mk.shape[0]*mk.shape[1]):
    MAXP=0;   maxindex=0;      tempF=[];
    for a in range(0,len(ALLpost)):
        tempF.append(ALLpost[a][n]);
    for k in range(0,len(tempF)):
        if(tempF[k]&gt;MAXP):
            MAXP=tempF[k];
            maxindex=k;
    LastLabel[n]=maxindex;

TenthMRF=mk-2;
for HL in range(0,len(LastLabel)):
    h=math.floor(HL/1200); l=HL%1200;
    TenthMRF[h][l]=LastLabel[HL];

# 成图展示
mylabel=TenthMRF;
print(mylabel)
plt.figure(figsize=(6,6))
im2 = Image.fromarray(mylabel);
plt.imshow(im2,cmap=plt.cm.get_cmap(&#39;cubehelix_r&#39;,8));
cbar=plt.colorbar()
cbar.set_ticks(np.linspace(0,7,8))
#cbar.set_ticklabels()
plt.clim(-0.5,8)
plt.title(&#39;Eight-Xianyan-TenthMRF&#39;);
plt.show();
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[[0 0 3 ..., 0 0 0]
 [0 0 3 ..., 0 0 0]
 [0 0 3 ..., 0 0 0]
 ...,
 [1 0 0 ..., 0 0 0]
 [0 1 0 ..., 0 0 0]
 [2 0 1 ..., 0 0 0]]
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/1stPart_One_7.4_Pan_GMM_MRF_25_1.png" src="../_images/1stPart_One_7.4_Pan_GMM_MRF_25_1.png" />
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../2ndPart/index.html" class="btn btn-neutral float-right" title="1. 图像平面分类" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="One_7.3_Mul_Kmeans.html" class="btn btn-neutral" title="&lt;no title&gt;" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, YNS.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/translations.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>